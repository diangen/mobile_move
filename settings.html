<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>个人设置</title>
  <link rel="stylesheet" href="./css/reset.css">
  <link rel="stylesheet" href="./font/iconfont.css">
  <link rel="stylesheet" href="./css//user/setting.css">
</head>

<body>

  <div class="box">
    <!-- 头部导航栏 -->
    <div class="nav">
      <div><span id="setBack" class="iconfont icon-xiangzuo-copy"></span></div>
      <h3>资料与账号设置</h3>
    </div>
    <!-- 设置个人信息 -->
    <div class="information">
      <h4>个人资料</h4>
      <ul id="set_infor1">

      </ul>
    </div>
    <!-- 账号设置 -->
    <div class="information">
      <h4>账号设置</h4>
      <ul id="set_infor2">

      </ul>
    </div>
  </div>

  <script src="./js/flexible.js"></script>
  <script src="./js/jquery-1.8.3.js"></script>
  <script src="./js/common.js"></script>
  <script>
    $("#setBack").click(function () {
      window.history.back();
    })

    $.ajax({
      type: "get",
      url: base + "/user/getUserInfo.do",
      data: {
        Authorization: localStorage.token
      },
      dataType: "json",
      success: function (response) {
        if (response.code = 100) {
          per_set1(response.data)
          per_set2(response.data)
        }
      }
    });
    function per_set1(data) {
      let str = `
         <li>
          <p>头像</p>
          <div class="rig">
            <div class="avater">
              <img src="${data.userHeadPicture}" alt="">
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>

        </li>
        <li>
          <p>个人ID</p>
          <div class="rig">
            <div class="avater-p">
              <p>${data.userNickname}</p>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>

        </li>
        <li>
          <p>昵称</p>
          <div class="rig">
            <div class="avater-p">
              <p>${data.userName}</p>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>

        </li>
        <li>
          <p>性别</p>
          <div class="rig">
            <div class="avater-p">
              <p>${data.userSex}</p>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>

        </li>
        <li>
          <p>长居地</p>
          <div class="rig">
            <div class="avater-p">
              <p>${data.userPermanentResidence}</p>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>
        </li>
        <li>
          <p>家乡</p>
          <div class="rig">
            <div class="avater-p">
              <p>${data.userHometown}</p>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>
        </li>
      `;
      $("#set_infor1").append(str)

    }
    function per_set2(data) {
      let str = `
      
           <li>
          <p>设置密码</p>
          <div class="rig">
            <div class="avater-p">
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>
        </li>
        <li>
          <p>手机号</p>
          <div class="rig">
            <div class="avater-p">
              <p>${data.userTel}</p>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>

        </li>
        <li>
          <p>邮箱</p>
          <div class="rig">
            <div class="avater-p">
              <div class="active">去绑定</div>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>

        </li>
        <li>
          <p>微信</p>
          <div class="rig">
            <div class="avater-p">
              <div>已绑定</div>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>

        </li>
        <li>
          <p>微博</p>
          <div class="rig">
            <div class="avater-p">
              <div class="active">去绑定</div>
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>
        </li>
        <li>
          <p>安全中心</p>
          <div class="rig">
            <div class="avater-p">
            </div>
            <span class="iconfont icon-xiangyou1"></span>
          </div>
        </li>
        <li>
          <p id="boxLayout" class="box_btn">退出用户</p>
        </li>
      `;
      $("#set_infor2").append(str)
    }

    $("#boxLayout").click(function () {
      $.ajax({
        type: "get",
        url: base + "user/logout",
        dataType: "json",
        success: function (response) {
          if (replaceState.code == 100) {
            console.log("退出成功")
          }
        }
      });
    })
  </script>
</body>

</html>